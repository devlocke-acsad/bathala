**Bathala AI Development Guidelines**  
*Concise Reference for AI Assistant – Bas### **Chapters & Bosses**

| Chapter | Theme | Key Mechanics |
|--------|------|---------------|
| **1: Shattered Grove** | Corrupted nature | Earth/Air focus; Mangangaway mimics player's last element, then curses cards. |
| **2: Drowned Isles** | Flooded ruins | Water/Fire conflict; Bakunawa reduces hand size, devours relics, nullifies damage. |
| **3: Skyward Citadel** | Divine deception | Status cycling; False Bathala steals relics, nullifies bonuses, forces moral choices. |

---

### **Detailed Chapter Design**

#### **Chapter 1: The Corrupted Ancestral Forests (Lupa/Hangin Focus)**

**Chapter Introduction**: Linear, 1-2 min.  
**Narrative**: "In balete groves—portals to anito realms where Bathala's breath birthed earth and winds carried omens—the engkanto's lies twist guardians into deceivers, echoing Bicolano tales of rebellion. Navigate day's harmony to attune relics; brave night's aggression to face trials. Survive five cycles (500 actions) to summon cursed enforcer and purify cradle." *(Lore from Eugenio, 2001: Rebellion tales; Jocano, 1969: Earth/wind cosmogony)*

**Gameplay**: Cycle pacing, Lupa/Hangin synergies.  
**Non-Linear Lore Delivery**: Emergent (20-30 min), via PCG encounters and nodes.  
**Arc**: Corruption as engkanto deceit twisting forest spirits.

##### **Enemy Encounters**
- **Tikbalang Scout** (HP: 28; Confuses targeting, Weak)
  - *Introduction*: "Lost in my paths, seer? False one's whispers guide!"
  - *Defeat*: "My tricks... unravel..."
  - *Spare (Mercy +1)*: "Spare me: Tikbalang were forest protectors, now misleading with backward hooves *(Ramos, 1990)*."
  - *Slay (Conquest -1)*: "End me—my essence feeds shadow!"
  - *Origin*: Tagalog, mountain tricksters *(Samar, 2019)*

- **Balete Wraith** (HP: 22; Vulnerable, gains Strength)
  - *Introduction*: "Roots entwine your fate!"
  - *Defeat*: "Grave... calls..."
  - *Spare*: "Mercy reveals: Balete trees are anito portals, haunted by engkanto-twisted spirits *(Jocano, 1969)*."
  - *Origin*: General, haunted figs *(Ramos, 1990)*

- **Sigbin Charger** (HP: 35; Burst every 3 turns)
  - *Introduction*: "Charge for shadow throne!"
  - *Defeat*: "My heart... stolen..."
  - *Spare*: "Compassion uncovers: Sigbin steal hearts for amulets, once loyal to Bathala *(Eugenio, 2001)*."
  - *Origin*: Visayan, goat-like eaters *(Ramos, 1990)*

- **Elite: Kapre Shade** (HP: 65; AoE Burn, minions)
  - *Introduction*: "Smoke veils my wrath!"
  - *Defeat*: "My tree... falls..."
  - *Spare*: "Compassion unlocks: Kapre, tree giants smoking cigars, loyal to Bathala *(Ramos, 1990)*."
  - *Origin*: General, smokers *(Eugenio, 2001)*

- **Boss: Mangangaway** (HP: 120; Mimics elements, curses cards, Hex of Reversal)
  - *Introduction*: "Fates reverse at my command!"
  - *Defeat*: "My hexes... unravel..."
  - *Spare*: "Grace spares: Mangangaway, sorcerers casting evil spells *(Ramos, 1990)*."
  - *Origin*: Tagalog, witches *(Eugenio, 2001)*

##### **Mysterious Events Nodes** (10, unconditional)
- **Anito Shrine** (Day): "Groves whisper creation *(Jocano, 1969)*." Grants relic/potion.
- **Balete Vision** (Night): "Roots twist anitos *(Ramos, 1990)*." Attune deck.
- **Diwata Whisper**: "Guardians mourn kapwa *(Jocano, 1969)*." Grants potion.
- **Forgotten Altar**: "Offerings fade under lies *(Ramos, 1990)*." Sculpt deck.
- **Tikbalang Crossroads** (Night): "Paths deceive like usurper *(Eugenio, 2001)*." Choose reward.

##### **Relics** (10, tied to enemies)
- **Tikbalang's Hoof**: +10% dodge. *Inspiration: Trickery (Ramos, 1990)*
- **Balete Root**: +2 block per Lupa card. *Inspiration: Portals (Samar, 2019)*
- **Sigbin Heart**: +5 damage on burst. *Inspiration: Amulets (Eugenio, 2001)*
- **Kapre's Cigar**: Summons minion once per combat. *Inspiration: Smoke (Ramos, 1990)*
- **Mangangaway Wand**: Ignore 1 curse. *Inspiration: Hexes (Eugenio, 2001)*

**Post-Boss Resolution**: Linear, 2-3 min. "Mangangaway falls: 'Hexes lift; earth stirs.' Lupa Diwa Shard purifies. Floods call with betrayals."

---

#### **Chapter 2: The Submerged Barangays (Tubig/Apoy Focus)**

**Chapter Introduction**: Linear, 1-2 min.  
**Narrative**: "In sunken barangays—where Bathala's tears wove seas with merfolk, per Visayan tales of warring offspring—engkanto's betrayals spark feuds, drowning kapwa in deceitful tides. Attune relics in day's calm; face fiery night surges. Survive five cycles to summon lunar devourer and restore depths." *(Lore from Eugenio, 2001: Visayan epics; Jocano, 1969: Water cosmogony)*

**Gameplay**: Tubig healing/Apoy damage, potion/relic synergies.  
**Non-Linear Lore Delivery**: Emergent (~30-40 min).  
**Arc**: Betrayals as engkanto manipulation in sea spirits.

##### **Enemy Encounters**
- **Sirena Illusionist** (HP: 30; Heals allies, charms miss)
  - *Introduction*: "Songs lure to deep!"
  - *Spare*: "Mercy sings: Sirena, benevolent guardians, corrupted by false tides *(Ramos, 1990)*."
  - *Origin*: General, mermaids *(Eugenio, 2001)*

- **Siyokoy Raider** (HP: 40; Armor, splash)
  - *Introduction*: "Scales claim drowned!"
  - *Spare*: "Grace spares: Siyokoy, malevolent mermen dragging victims *(Samar, 2019)*."
  - *Origin*: General, scaled drowners *(Ramos, 1990)*

- **Elite: Apoy-Tubig Fury** (HP: 68; Burn AoE/healing)
  - *Introduction*: "Elements clash in fury!"
  - *Spare*: "Pity reveals: Elementals, feuding fire-water forces *(Jocano, 1969)*."
  - *Origin*: Visayan, elemental conflicts *(Eugenio, 2001)*

- **Boss: Bakunawa** (HP: 150; Flood, devours relics, warps hands, Lunar Eclipse)
  - *Introduction*: "Moons fall to my maw!"
  - *Defeat*: "My hunger... sated..."
  - *Spare*: "Grace spares: Bakunawa, moon-eater causing eclipses *(Ramos, 1990)*."
  - *Origin*: Bicolano/Visayan, eclipse serpent *(Eugenio, 2001)*

##### **Relics** (10)
- **Sirena's Scale**: +2 heal per Tubig card. *Inspiration: Healing (Ramos, 1990)*
- **Bakunawa Fang**: +5 damage on relic use. *Inspiration: Ferocity (Eugenio, 2001)*
- **Elemental Core**: +3 damage on Apoy/Tubig. *Inspiration: Balance (Jocano, 1969)*

**Post-Boss Resolution**: Linear, 2-3 min. "Bakunawa yields: 'Hunger fades; skies thunder.' Tubig Diwa Shard calms waters."

---

#### **Chapter 3: The Skyward Citadel (Multi-Element Focus)**

**Chapter Introduction**: Linear, 1-2 min.  
**Narrative**: "Atop ethereal citadel—Bathala's dream-realm of omens and courts, where siblings Apolaki and Mayari balanced sun/moon—the engkanto's illusions cycle deceptions, fracturing skies. Infuse multi-element synergies in day's visions; survive night's thunderous trials. Endure five cycles to unmask impostor—born from serpent and winged spirits' grave, perverting the coconut tree's gift—and restore order." *(Lore from Jocano, 1969: Sibling deities; Eugenio, 2001: Celestial tales; Treasury of Tagalog: Coconut myth)*

**Gameplay**: Multi-element combos, relic synergy.  
**Non-Linear Lore Delivery**: Emergent (~30-40 min).  
**Arc**: Divine lies as engkanto's fusion mocking Bathala's throne.

##### **Enemy Encounters**
- **Tigmamanukan Watcher** (HP: 26; Grows Strength)
  - *Introduction*: "Omens watch your path!"
  - *Spare*: "Mercy foretells: Tigmamanukan, prophetic birds of Bathala *(Jocano, 1969)*."
  - *Origin*: Tagalog, divination birds *(Eugenio, 2001)*

- **Elite: Apolaki Godling** (HP: 85; Changes poker rules)
  - *Introduction*: "Sun's wrath challenges you!"
  - *Spare*: "Pity uncovers: Apolaki, war/sun deity rivaling Mayari *(Jocano, 1969)*."
  - *Origin*: Tagalog, Bathala's son *(Eugenio, 2001)*

- **Boss: False Bathala** (HP: 200; Steals relics, nullifies bonuses, shifts elements, Divine Judgment)
  - *Introduction*: "Bow to merged god—serpent and wings as one!"
  - *Defeat*: "My fusion... fractures..."
  - *Spare*: "Grace unmasks: False Bathala, engkanto-revived Ulilang Kaluluwa (slain serpent) and Galang Kaluluwa (winged friend buried with him), twisted from grave into impostor, perverting coconut tree's life gift *(Treasury of Tagalog)*."
  - *Origin*: Tagalog myth adaptation *(Jocano, 1969)*

##### **Relics** (10)
- **Coconut Diwa**: Ignore 1 nullify. *Inspiration: Life myth (Samar, 2019)*
- **Apolaki's Spear**: +5 damage multi-element. *Inspiration: Power (Jocano, 1969)*
- **Tigmamanukan Feather**: +1 draw high-tier. *Inspiration: Omens (Jocano, 1969)*

**Post-Boss Resolution**: Linear, 2-3 min. "False Bathala unmasks: 'Shadows fade; order returns.' Final Diwa Shard restores skies."

---

#### **Epilogue: The Mended Bamboo**

**Delivery**: Linear (~10-15 min).  
**Narrative**: Landás-based:
- **Mercy**: Anito harmony, lore unlocks
- **Balance**: Cyclical order, educational  
- **Conquest**: Ruthless restoration, darker myths

Bathala: "Bamboo mends; myths endure." Montage of PCG lore, Chronicle unlocks.

**Mythological References**: Bamboo split as creation *(Jocano, 1969)*.

--- v5.8.14.25*

---

### **Project Overview**

**Game**: *Bathala* – A **Filipino mythology-inspired roguelike card game** with **poker-based combat**, **deck-sculpting**, and a **rule-based Dynamic Difficulty Adjustment (DDA)** system.  
**Thesis Focus**: Design and validation of a **transparent, rule-based DDA system** to maintain player "flow" through measurable performance metrics.  
**Tech Stack**: TypeScript + Phaser.js (Web)  
**Core Loop**: Overworld navigation → Combat (hand formation) → Progression via deck-sculpting → Survive 5 day-night cycles → Boss fight.

---

### **Core Mechanics**

#### **1. Combat & Deck System**
- **Starting Deck**: 52 cards (4 suits: Apoy, Tubig, Lupa, Hangin; values 1–13).
- **Hand Formation**: Draw 8, choose 5 to form a poker hand.
- **Actions**: Attack, Defend, Special — powered by hand bonuses.
- **Hand Bonuses**:
  - Pair (+2), Two Pair (+4), Three of a Kind (+7), Straight (+10), Flush (+14), Full House (+18), Four of a Kind (+22), Straight Flush (+35), Five of a Kind (+30).
- **Elemental Effects**: Each suit modifies actions and applies status effects (e.g., Apoy = Burn, Lupa = Strength).
- **Status Effects**: Strength, Dexterity, Weak, Vulnerable, Burn, Stun, Seal, etc.

#### **2. Deck-Sculpting**
| Action | Location | Effect |
|--------|--------|--------|
| Purify | Shop | Remove a card permanently |
| Attune | Rest Site | Upgrade a card’s value (same suit) |
| Infuse | Elite/Boss | Add a new card to deck |

#### **3. Discard System**
- 1 discard charge per combat (spend to redraw up to 5 cards).
- Max charges increased by relics.

---

### **Progression & Systems**

#### **Overworld**
- Grid-based, procedurally generated.
- **Day/Night Cycle**: Advances by player actions (50 actions per phase).
  - **Day**: Neutral enemies.
  - **Night**: Aggressive enemies.
- **Five-Cycle Countdown**: Boss spawns after ~500 actions (5 full cycles).

#### **Landás System (Morality)**
- **Slay** = –1, **Spare** = +1.
- **Alignments**:
  - **Mercy** (+5 to +10): More Spirit Fragments.
  - **Balance** (–4 to +4): Standard rewards.
  - **Conquest** (–10 to –5): More gold.
- **No impact on difficulty** — only narrative and rewards.

#### **Meta-Progression**
- **Currency**: Spirit Fragments (earned per run).
- **Ancestral Memories**: Permanent unlocks (e.g., +Max HP, extra Dexterity).
- **Chronicle**: Lore entries unlocked via gameplay conditions.

---

### **Item Systems**

#### **Relics (Passive, max 6)**
- **Sources**: Elite (60%), Boss (30%), Treasure/Event (10%).
- **Examples**:
  - *Babaylan's Talisman*: Hand is one tier higher.
  - *Agimat of the Swift Wind*: +1 discard charge.
  - *Earthwarden's Plate*: Start with 5 persistent block.
  - *Echo of the Ancestors*: Enables Five of a Kind.

#### **Potions (Active, max 3)**
- Single-use combat effects.
- **Examples**:
  - *Potion of Clarity*: Draw 3 cards.
  - *Elixir of Fortitude*: Gain 15 block.
  - *Phial of Elements*: Choose dominant element.
  - *Balm of Resilience*: Cleanse all debuffs.

---

### **Chapters & Bosses**

| Chapter | Theme | Key Mechanics |
|--------|------|---------------|
| **1: Shattered Grove** | Corrupted nature | Earth/Air focus; Mangangaway mimics player’s last element, then curses cards. |
| **2: Drowned Isles** | Flooded ruins | Water/Fire conflict; Bakunawa reduces hand size, devours relics, nullifies damage. |
| **3: Skyward Citadel** | Divine deception | Status cycling; False Bathala steals relics, nullifies bonuses, forces moral choices. |

---

### **Dynamic Difficulty Adjustment (DDA)**

#### **Design Goal**
Maintain player "flow" using a **rule-based system** that adapts to performance, **independent of Landás**.

#### **Player Performance Score (PPS)**
- Starts at 2.5.
- Updated post-combat:
  - `+0.3` if end with >90% HP
  - `–0.4` if <20% HP
  - `+0.2` for Four of a Kind or better
  - `–0.25` if combat >8 turns

#### **Difficulty Tiers**
| Tier | State | Game Response |
|------|------|----------------|
| 0 | Struggling | –20% enemy stats, more Rest nodes, subtle hints |
| 1–2 | Learning | Standard difficulty, minor adjustments |
| 3–4 | Thriving | +15% enemy stats, advanced AI patterns |
| 5 | Mastering | Max difficulty, complex mechanics, fewer safety nets |

#### **Adjustments**
- Enemy HP/DMG scaling (±25%)
- Shop prices and gold tuning
- Map generation bias (e.g., more Rest nodes if PPS low)
- **Narrative framing**: In-world events reflect difficulty changes.

---

### **Technical Implementation**

#### **File Structure**
```bash
src/
├── core/
│   ├── game/            # Phaser scenes, UI
│   ├── mechanics/       # Combat, relics, potions, landas, overworld
│   ├── dda/             # RuleBasedDDA, PPS logic
│   └── types/
├── data/
│   ├── cards/
│   ├── enemies/
│   ├── relics/
│   ├── potions/
│   └── lore/
├── utils/
│   ├── analytics/       # PPS, session logging
│   ├── dda/             # Rules engine
│   └── helpers/
└── tests/
    ├── unit/            # Combat, DDA, relics
    └── integration/     # Overworld → combat → DDA
```

#### **Code Standards**
- TypeScript strict mode
- JSDoc for all public methods
- Unit tests for core mechanics and DDA
- ESLint + Prettier

---

### **AI Assistant Guidelines**

When assisting:
- ✅ Use **TypeScript** with strict typing.
- ✅ Focus on **rule-based DDA**, not ML.
- ✅ Prioritize **transparency, testability, and reproducibility**.
- ✅ Align with **GDD v5.8.14.25**.
- ✅ Suggest **A/B testing** and **performance logging** for thesis validation.
- ❌ Do not suggest ML, neural networks, or blockchain features.

---

**Note**: This document is the single source of truth for AI assistance. All suggestions must support the **rule-based DDA thesis** and **core game mechanics** as defined.




